<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta property="og:image" content="../images/image-facebook.jpg">
        <meta property="og:image:type" content="image/jpeg">
        <meta property="og:image:width" content="1080">
        <meta property="og:image:height" content="1080">

        
        
        <link rel="canonical" href="https://sumodocs-zhtw.emc521.tw/Tools/tls.html">
        <link rel="shortcut icon" href="../images/favicon.ico">
        <title>tls - SUMO 說明文件｜SUMO Documentation (Chinese Traditional)</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../stylesheets/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 

      <script>
        // DARK MODE
        function detectColorScheme(){
          var theme="light";

          if(localStorage.getItem("sumo-docs-theme")){
              if(localStorage.getItem("sumo-docs-theme") == "dark"){
                  var theme = "dark";
              }
          } else if(!window.matchMedia) {
              return false;
          } else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
              var theme = "dark";
          }

          if (theme=="dark") {
              document.documentElement.setAttribute("data-theme", "dark");
          }
        }
        detectColorScheme();
      </script>

    </head>

    <body>

        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary text-center">
            <div class="container-fluid">
                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../index.html" class="nav-link">說明文件首頁</a>
                            </li>
                            <li class="navitem">
                                <a href="../Tutorials/index.html" class="nav-link">教學</a>
                            </li>
                            <li class="navitem">
                                <a href="../FAQ.html" class="nav-link">常見問題</a>
                            </li>
                            <li class="navitem">
                                <a href="../Downloads.html" class="nav-link">下載 SUMO</a>
                            </li>
                            <li class="navitem">
                                <a href="../Publications.html" class="nav-link">出版品</a>
                            </li>
                            <li class="navitem">
                                <a href="../Developer/index.html" class="nav-link">開發人員</a>
                            </li>
                            <li class="navitem">
                                <a href="../ChangeLog.html" class="nav-link">版本紀錄</a>
                            </li>
                            <li class="navitem">
                                <a href="https://eclipse.org/sumo/contact/" class="nav-link">聯絡我們</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i>搜尋原文內容
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="edit" href="https://github.com/45EMC521/sumodocs-zhtw/edit/main/docs/Tools/tls.md" class="nav-link"><i class="fa fa-github"></i>在 GitHub 編輯中文文件</a>
                            </li>
                      <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                            More <i class="fa fa-chevron-circle-down"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item no-arrow-link" href="https://github.com/45EMC521/sumodocs-zhtw/issues">回報文件錯誤／翻譯錯誤／提供意見</a>
                            <a class="dropdown-item" href="../Editing_Articles.html">有興趣編輯文章嗎？</a>
                            <a class="dropdown-item" href="https://github.com/45EMC521/sumodocs-zhtw/commits/">文件更新紀錄</a>
                            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#mkdocs_keyboard_modal">快速鍵</a>
                            <a class="dropdown-item no-arrow-link" href="https://sumo.dlr.de/sumo_documentation.zip">下載整份文件（原文版本）</a>
                            <a class="dropdown-item no-arrow-link" href="https://github.com/45EMC521/sumodocs-zhtw/archive/refs/heads/main.zip">下載整份文件（正體中文）</a>
                            <span class="dropdown-item" id="dark-mode-div">深色模式<label id="theme-switch" class="theme-switch" for="checkbox_theme">
                              <input type="checkbox" id="checkbox_theme">
                          </label></span>
                          </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container-fluid">
          <div class="row">
                <div class="col-md-3">
                  <div class="text-center"><a href="../index.html" style="display: inline-block; margin-top: 5px;"><img src="../images/sumo-logo.png" class="sumoLogo" alt="SUMO Logo" width="120px"></a></div>
                  
<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary toc-scroll toc">
        <ul class="nav flex-column bs-sidenav">
            <p style="margin-top:5px; color:#777777;" class="text-center">Contents</p>
            <li class="nav-item main"><a href="#tlscoordinatorpy">tlsCoordinator.py</a></li>
            <li class="nav-item main"><a href="#tlscycleadaptationpy">tlsCycleAdaptation.py</a></li>
            <li class="nav-item main"><a href="#tls_csv2sumopy">tls_csv2SUMO.py</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#example" class="nav-link">• Example</a>
                </li>
            <li class="nav-item main"><a href="#tls_csvsignalgroupspy">tls_csvSignalGroups.py</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#example_with_a_single_green_phase_per_signal_group" class="nav-link">• Example with a single green phase per signal group</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#example_with_two_green_phases_for_some_groups" class="nav-link">• Example with two green phases for some groups</a>
                </li>
            <li class="nav-item main"><a href="#buildtransitionspy">buildTransitions.py</a></li>
        </ul>
    </div>

    <div class="admonition conference" style="position: sticky; margin-top: 20px; margin-bottom:10px;">
        <p>歡迎您造訪 <a href="https://eclipse.org/sumo">eclipse.org/sumo</a>。</p>
        <p>SUMO 說明文件正體中文版是基於 SUMO Documentation 原文版於 2022/04/01 快取所翻譯的。如要閱讀最新的文件內容，請至 <a href="https://sumo.dlr.de/docs/">SUMO Documentation</a> 原文版了解詳情。</p>
        </div>

</div>
                  <!--  -->
                </div>
                <div class="col-md-9 main-area" role="main">
                   <!-- page.is_homepage seems to be broken in Mkdocs > 1.1.0 -->
                  <ul class="breadcrumbs">
    <script>
        var pagePath = "/Tools/tls.html";
        var splitUrl = pagePath.split("/");
        splitUrl.pop();
        splitUrl.shift();
        if (splitUrl[0] == 'docs') splitUrl.shift();
        var homeLink = "../index.html";
        document.write('<li class="breadcrumb-item"><a href="' + homeLink + '"><i class="fa fa-home"></i></a></li>');
        var prev = '';
        
        var dirLink = splitUrl.map(function (el) {
        el = prev + el; prev = el + '/'; return el;
        });

        for (i = 0; i < splitUrl.length; i++) {
            document.write("<li class=\"breadcrumb-item\"><a class=\"no-arrow-link\" href=\"../" + dirLink[i] + "\">" + splitUrl[i] + "</a></li>");
        }
    </script>
    <li class="breadcrumb-item active">tls</li>
</ul>
                  <hTitles>tls<hr style="border: 0.5px solid #338033; margin-top: 5px !important;"></hTitles>
                  
                  

<h1 id="tlscoordinatorpy">tlsCoordinator.py<a class="headerlink" href="#tlscoordinatorpy" title="Permanent link">#</a></h1>
<p>This script modifies the traffic-light offsets to coordinate them for a
given traffic demand. Example call:</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span><span class="w"> </span><span class="n">tools</span><span class="o">/</span><span class="n">tlsCoordinator</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">net</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="n">routes</span><span class="o">.</span><span class="n">rou</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">tlsOffsets</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">xml</span><span class="w"></span>
</code></pre></div>

<p>This would generate the file <em>tlsOffsets.add.xml</em> which can be loaded
into <a href="../sumo.html">sumo</a>:</p>
<div class="codehilite"><pre><span></span><code>sumo -n net.net.xml -r routes.rou.xml -a tlsOffsets.add.xml
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is advisable to run this with a <em>.net.xml</em> file where all traffic lights have the same cycle time. This is the default since version 0.25.0 but older networks should be rebuilt</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The route input must contain <code>&lt;vehicle&gt;</code>s with <code>&lt;route&gt;</code>-child-elements. Flows and trips are not supported.</p>
</div>
<h1 id="tlscycleadaptationpy">tlsCycleAdaptation.py<a class="headerlink" href="#tlscycleadaptationpy" title="Permanent link">#</a></h1>
<p>This script modifies the duration of green phases according to Websters
formula to best accommodate a given traffic demand. Example call:</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span><span class="w"> </span><span class="n">tools</span><span class="o">/</span><span class="n">tlsCycleAdaptation</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">net</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="n">routes</span><span class="o">.</span><span class="n">rou</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">newTLS</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">xml</span><span class="w"></span>
</code></pre></div>

<p>This would generate the file <em>newTLS.add.xml</em> which can be loaded into
<a href="../sumo.html">sumo</a>:</p>
<div class="codehilite"><pre><span></span><code>sumo -n net.net.xml -r routes.rou.xml -a newTLS.add.xml
</code></pre></div>

<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The route input must contain <code>&lt;vehicle&gt;</code>s with <code>&lt;route&gt;</code>-child-elements. Flows and trips are not supported.</p>
</div>
<h1 id="tls_csv2sumopy">tls_csv2SUMO.py<a class="headerlink" href="#tls_csv2sumopy" title="Permanent link">#</a></h1>
<p>This tool requires the program definition and the SUMO-network it shall
be converted to:</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span><span class="w"> </span><span class="n">tools</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">tls_csv2SUMO</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">&lt;</span><span class="n">TLS_CSV</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">NET</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>

<p>It prints the generated TLS definition on stdout (you can pipe it to a
file).</p>
<p>The format of the CSV description is as following. At first, three
header lines must be given, which name the tls (which is the id of the
tlLogic in the network), the program's subkey, and the offset at which
the program shall start in seconds - normally 0:</p>
<div class="codehilite"><pre><span></span><code>    key;&lt;KEY&gt;
    subkey;&lt;SUBKEY&gt;
    offset;&lt;OFFSET&gt;
</code></pre></div>

<p>Then, it is defined which signal (number) in the program is responsible
for which link. The link may be described either using the incoming edge
only, or the incoming lane only, or also incorporating the outgoing
edge/lane. This means the following lines are all valid:</p>
<div class="codehilite"><pre><span></span><code>    link;&lt;LINK_NUMBER&gt;;&lt;FROM_EDGE&gt;;;0
    link;&lt;LINK_NUMBER&gt;;&lt;FROM_LANE&gt;;;0
    link;&lt;LINK_NUMBER&gt;;&lt;FROM_EDGE&gt;;&lt;TO_EDGE&gt;;0
    link;&lt;LINK_NUMBER&gt;;&lt;FROM_EDGE&gt;;&lt;TO_LANE&gt;;0
    link;&lt;LINK_NUMBER&gt;;&lt;FROM_LANE&gt;;&lt;TO_EDGE&gt;;0
    link;&lt;LINK_NUMBER&gt;;&lt;FROM_LANE&gt;;&lt;TO_LANE&gt;;0
</code></pre></div>

<p>It is also possible to assign more than one link to a single signal.</p>
<p>Then, the signals' states are given:</p>
<div class="codehilite"><pre><span></span><code>&lt;LINK_NUMBER&gt;;&lt;STATES&gt;
</code></pre></div>

<p>The states are encoded using the signal colors (please note that only
lower-case letters are used, see below) described above, separated by
';'. An example signal phase definition (for signal 1) could be:</p>
<div class="codehilite"><pre><span></span><code><span class="mf">1</span><span class="p">;</span><span class="n">g</span><span class="p">;</span><span class="n">g</span><span class="p">;</span><span class="n">g</span><span class="p">;</span><span class="n">g</span><span class="p">;</span><span class="n">y</span><span class="p">;</span><span class="n">r</span><span class="p">;</span><span class="n">r</span><span class="p">;</span><span class="n">r</span><span class="p">;</span><span class="n">r</span><span class="p">;</span><span class="n">r</span><span class="w"></span>
</code></pre></div>

<p>Please not that the number of states must be the same for all defined
links.</p>
<p>Now, we only have to define the phase times:</p>
<div class="codehilite"><pre><span></span><code>time;&lt;TIMES&gt;
</code></pre></div>

<p>The times are given in seconds, again separated using ';'. An example
could be:</p>
<div class="codehilite"><pre><span></span><code>time;18;33;3;6;3;3;9;15;90
</code></pre></div>

<p>A complete CSV-description could look like:</p>
<div class="codehilite"><pre><span></span><code>    key;102
    subkey;utopia
    offset;0
    link;1;4643;;0
    link;1;3078;;0
    link;2;3074;;0
    link;2;-6494;;0
    1;g;g;y;r;r;r;r;r
    2;r;r;r;r;g;g;y;r
    3;r;r;r;r;g;y;y;r
    4;g;y;y;r;r;r;r;r
    min;21;3;3;2;20;9;3;2
    time;45;3;3;2;36;9;3;2
    max;78;3;3;2;62;9;3;2
</code></pre></div>

<h2 id="example">Example<a class="headerlink" href="#example" title="Permanent link">#</a></h2>
<p>The example shows what is tested in
<a href="http://sourceforge.net/apps/trac/sumo/browser/trunk/sumo/tests/tools/tls/csv2sumo/both_ok">[1]</a>.
It is not a real-world program plan, only a demonstration for using the
script.</p>
<p>We have a simple four-arms intersections which is controlled by traffic
lights, see next figure.</p>
<p><strong>Figure: example intersection</strong></p>
<p><img alt="tls2csv_example_net.svg" src="../images/Tls2csv_example_net.svg" title="tls2csv_example_net.svg" /></p>
<p>Now, we define two different programs for this intersection. The first:</p>
<div class="codehilite"><pre><span></span><code>key;0
subkey;own1
offset;0
link;1;4si;3o;0
link;1;4si;1o;0
link;1;3si;4o;0
link;1;3si;2o;0
link;2;4si;4o;0
link;2;4si;2o;0
link;2;3si;1o;0
link;2;3si;3o;0
link;3;1si;1o;0
link;3;1si;4o;0
link;3;2si;2o;0
link;3;2si;3o;0
link;4;1si;3o;0
link;4;1si;2o;0
link;4;2si;1o;0
link;4;2si;4o;0
1;g;y;r;r;r;r;r;r;r;r
2;g;g;g;y;r;r;r;r;r;r
3;r;r;r;r;r;g;y;r;r;r
4;r;r;r;r;r;g;g;g;y;r
min;10;3;5;3;3;10;3;5;3;3
time;15;3;5;3;3;45;3;5;3;3
max;30;3;15;3;3;60;3;15;3;3
</code></pre></div>

<p>This means that we have four streams: two for north/south (edges 3si and
4si) and two for east/west (edges 1si and 2si). Two, because we give
green longer for the respective left-movers. The key is the ID of the
traffic light ("0"), the subkey is the name of our program ("own1").</p>
<p>The second program looks like this:</p>
<div class="codehilite"><pre><span></span><code>key;0
subkey;own2
offset;0
link;1;4si;3o;0
link;1;4si;1o;0
link;1;3si;4o;0
link;1;3si;2o;0
link;2;4si;4o;0
link;2;4si;2o;0
link;2;3si;1o;0
link;2;3si;3o;0
link;3;1si;2o;0
link;3;1si;3o;0
link;3;2si;1o;0
link;3;2si;4o;0
link;4;1si;4o;0
link;4;1si;1o;0
link;4;2si;3o;0
link;4;2si;2o;0
1;g;y;r;r;r;r;r;r
2;g;g;g;y;r;r;r;r
3;r;r;r;r;g;y;r;r
4;r;r;r;r;g;g;g;y
time;31;16;6;16;31;16;6;16
</code></pre></div>

<p>We convert those program definitions using</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span><span class="w"> </span><span class="n">tools</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">tls_csv2SUMO</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="n">lsa_def</span><span class="o">.</span><span class="n">csv</span><span class="p">,</span><span class="n">lsa_def2</span><span class="o">.</span><span class="n">csv</span><span class="w"> </span><span class="n">input_net</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">xml</span><span class="w"></span>
</code></pre></div>

<p>And obtain the following programs after loading them into
<a href="../sumo-gui.html">sumo-gui</a>:</p>
<p><strong>Figure: converted programs</strong></p>
<p><img alt="program_own1.png" src="../images/Program_own1.png" title="program_own1.png" />
<img alt="program_own2.png" src="../images/Program_own2.png" title="program_own2.png" /></p>
<h1 id="tls_csvsignalgroupspy">tls_csvSignalGroups.py<a class="headerlink" href="#tls_csvsignalgroupspy" title="Permanent link">#</a></h1>
<p>Converts a csv-tls-description into one SUMO can read as additional
file. This tool differs from <strong>tls_csv2SUMO.py</strong> by being based on
signal groups in a way that is closer to the typical representation used
by traffic engineers. It accepts green times per signal group and
creates the <a href="../sumo.html">sumo</a> tls representation out of it using
the . Example call to convert two csv-tls-descriptions into the
additional file <em>tls.add.xml</em>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span><span class="w"> </span><span class="n">tools</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">tls_csvSignalgroups</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">net</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">tl1</span><span class="o">.</span><span class="n">csv</span><span class="p">,</span><span class="n">tl2</span><span class="o">.</span><span class="n">csv</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">tls</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">xml</span><span class="w"></span>
</code></pre></div>

<p>In the opposite direction, templates for csv-tls-descriptions of all tls
in a <a href="../sumo.html">sumo</a> network can be written to a given directory
and completed by hand:</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span><span class="w"> </span><span class="n">tools</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">tls_csvSignalgroups</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">net</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">xml</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="o">.</span><span class="w"></span>
</code></pre></div>

<p>The input csv file contains input blocks divided by titles in brackets.
The block [general] sets general information relating to the signal
program like the tls ID, the program ID, the cycle time [s] and the
offset time [s]. Additional 0..n optional parameters can also be
supplied. The [links] block lists the relations between signal groups
and junction connections in <a href="../sumo.html">sumo</a>. The relation is
build from the edges/lanes controlled by the respective signal group.
The target edge/lane can be omitted. The last block [signal groups]
contains the table of green times and signal group properties. The table
uses a header row with the following keywords and their meanings:</p>
<table>
<thead>
<tr>
<th>Header</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>signal group id, see block [links]</td>
</tr>
<tr>
<td>on1</td>
<td>start time (signal state green) [s] for the first green time in the cycle</td>
</tr>
<tr>
<td>off1</td>
<td>end time (signal state green) [s] for the first green time in the cycle</td>
</tr>
<tr>
<td>on2</td>
<td>optional start time (signal state green) [s] for the second green time in the cycle</td>
</tr>
<tr>
<td>off2</td>
<td>optional end time (signal state green) [s] for the second green time in the cycle</td>
</tr>
<tr>
<td>transOn</td>
<td>duration [s] for special signal state before green (red-yellow)</td>
</tr>
<tr>
<td>transOff</td>
<td>duration [s] for special signal state after green (yellow)</td>
</tr>
</tbody>
</table>
<p>The keywords may have a different order than shown above. The definition
of a second green time per cycle (keywords <em>on2</em> and <em>off2</em>) is
optional, so are the keywords.</p>
<h2 id="example_with_a_single_green_phase_per_signal_group">Example with a single green phase per signal group<a class="headerlink" href="#example_with_a_single_green_phase_per_signal_group" title="Permanent link">#</a></h2>
<div class="codehilite"><pre><span></span><code><span class="k">[general]</span><span class="w"></span>
<span class="na">cycle time;60</span><span class="w"></span>
<span class="na">key;1</span><span class="w"></span>
<span class="na">subkey;SZP_LeftTurn</span><span class="w"></span>
<span class="na">offset;0</span><span class="w"></span>
<span class="na">parameter;key1;value1</span><span class="w"></span>
<span class="na">parameter;key2;value2</span><span class="w"></span>
<span class="k">[links]</span><span class="w"></span>
<span class="na">FZ11;-474_0;</span><span class="w"></span>
<span class="na">FZ12;-474_1;</span><span class="w"></span>
<span class="na">FZ21;-472_0;</span><span class="w"></span>
<span class="na">FZ31;-468_0;</span><span class="w"></span>
<span class="na">FZ32;-468_1;</span><span class="w"></span>
<span class="na">FZ41;-470_0;</span><span class="w"></span>
<span class="k">[signal groups]</span><span class="w"></span>
<span class="na">id;on1;off1;transOn;transOff</span><span class="w"></span>
<span class="na">FZ11;0;25;1;3</span><span class="w"></span>
<span class="na">FZ12;0;35;1;3</span><span class="w"></span>
<span class="na">FZ21;40;55;1;3</span><span class="w"></span>
<span class="na">FZ31;0;25;1;3</span><span class="w"></span>
<span class="na">FZ32;0;35;1;3</span><span class="w"></span>
<span class="na">FZ41;40;55;1;3</span><span class="w"></span>
</code></pre></div>

<h2 id="example_with_two_green_phases_for_some_groups">Example with two green phases for some groups<a class="headerlink" href="#example_with_two_green_phases_for_some_groups" title="Permanent link">#</a></h2>
<div class="codehilite"><pre><span></span><code><span class="k">[general]</span><span class="w"></span>
<span class="na">cycle time;60</span><span class="w"></span>
<span class="na">key;1</span><span class="w"></span>
<span class="na">subkey;SZP_2Green</span><span class="w"></span>
<span class="na">offset;0</span><span class="w"></span>
<span class="k">[links]</span><span class="w"></span>
<span class="na">FZ11;-474_0;</span><span class="w"></span>
<span class="na">FZ12;-474_1;</span><span class="w"></span>
<span class="na">FZ21;-472_0;</span><span class="w"></span>
<span class="na">FZ31;-468_0;</span><span class="w"></span>
<span class="na">FZ32;-468_1;</span><span class="w"></span>
<span class="na">FZ41;-470_0;</span><span class="w"></span>
<span class="k">[signal groups]</span><span class="w"></span>
<span class="na">id;on1;off1;transOn;transOff;on2;off2</span><span class="w"></span>
<span class="na">FZ11;0;15;1;3;;</span><span class="w"></span>
<span class="na">FZ12;0;15;1;3;40;55</span><span class="w"></span>
<span class="na">FZ21;25;35;1;3;;</span><span class="w"></span>
<span class="na">FZ31;0;25;1;3;;</span><span class="w"></span>
<span class="na">FZ32;0;15;1;3;40;55</span><span class="w"></span>
<span class="na">FZ41;25;35;1;3;;</span><span class="w"></span>
</code></pre></div>

<h1 id="buildtransitionspy">buildTransitions.py<a class="headerlink" href="#buildtransitionspy" title="Permanent link">#</a></h1>
<p>This tool creates tlLogic definitions with branching signal plans based on a simplified
input: named green phases and list of successor green phases names.
The corresponding yellow and red phases will be build and the 'next' attribute
will be set to the appropriate transition phase.</p>
<div class="codehilite"><pre><span></span><code><span class="n">python</span><span class="w"> </span><span class="n">tools</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">buildTransitions</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">&lt;</span><span class="n">tlLogic</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="o">&lt;</span><span class="n">output</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
                </div>
          </div>
          <button onclick="goTopFunction()" id="goToTop" title="Go to top"><i class="fa fa-arrow-up"></i></button>
        </div>

        <footer class="col-md-12">
          
            <br><small><i>本頁面最近更新日期：02 April 2022</i></small>
          
          <hr>
            <p>Copyright &copy; 2001-2022 德國航空太空中心 (DLR) 和其他貢獻者｜中文翻譯由 Yu-Hsuan Liao 及其他貢獻者維護</p>
          <p>在這些地方追蹤我們：<a class="no-arrow-link" href="https://www.twitter.com/eclipsesumo/"><i class="fa fa-twitter"></i></a> <a class="no-arrow-link" href="https://www.facebook.com/simulationofurbanmobility/"><i class="fa fa-facebook-square"></i></a> <a class="no-arrow-link" href="https://www.instagram.com/eclipse.sumo/"><i class="fa fa-instagram"></i></a>
          ｜本說明文件由 <a href="https://www.mkdocs.org/">MkDocs</a> 提供支援。</p>
        </footer>

      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">搜尋</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">關閉</span></button>
            </div>
            <div class="modal-body" style="color: #495057 !important;">
                <p>Enter your search terms:</p>
                <script async src="https://cse.google.com/cse.js?cx=004302551366764109984:1kpgtzrm6kv"></script>
                <div class="gcse-search"></div>
            </div>
        </div>
    </div>
</div>
      <script>
        window.onscroll = function() {scrollFunction()};
        
        function scrollFunction() {
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("goToTop").style.display = "block";
          } else {
            document.getElementById("goToTop").style.display = "none";
          }
        }
    
        function goTopFunction() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }

        var base_url = "..",
            shortcuts = {"edit": 69, "help": 191, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>

        <script>
          const toggleSwitch = document.querySelector('#theme-switch input[type="checkbox"]');
  
          function switchTheme(e) {
              if (e.target.checked) {
                  localStorage.setItem('sumo-docs-theme', 'dark');
                  document.documentElement.setAttribute('data-theme', 'dark');
                  toggleSwitch.checked = true;
              } else {
                  localStorage.setItem('sumo-docs-theme', 'light');
                  document.documentElement.setAttribute('data-theme', 'light');
                  toggleSwitch.checked = false;
              }    
          }
  
          toggleSwitch.addEventListener('change', switchTheme, false);
  
          if (document.documentElement.getAttribute("data-theme") == "dark"){
              toggleSwitch.checked = true;
          }
          </script>

      <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Key</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody style="color: #495057 !important;">
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>開啟快速鍵列表</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>搜尋文件</td>
                  </tr>
                  <tr>
                    <td class="edit shortcut"><kbd>e</kbd></td>
                    <td>在 GitHub 上編輯本頁</td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
    </div>
</div>
    </body>
</html>
